<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>ICT第四次笔记 | 波波，早点走出来</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="第四次笔记交换机PC连接   *down 管理员将端口shutdown dis current-configuration 显示当前配置 display mac-address |include xxxx     只显示与xxxx有关的内容 排错思路：哪个设备  什么技术 什么原因 路由器转发原理：路由器基于路由表进行数据包转发 路由转发要从一端到另一端的路由器的路由表中都有目的网段。 例：">
<meta property="og:type" content="article">
<meta property="og:title" content="ICT第四次笔记">
<meta property="og:url" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="波波，早点走出来">
<meta property="og:description" content="第四次笔记交换机PC连接   *down 管理员将端口shutdown dis current-configuration 显示当前配置 display mac-address |include xxxx     只显示与xxxx有关的内容 排错思路：哪个设备  什么技术 什么原因 路由器转发原理：路由器基于路由表进行数据包转发 路由转发要从一端到另一端的路由器的路由表中都有目的网段。 例：">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221029151115327.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221031212827831.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221031214421810.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221031223237665.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221031224334178.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221102235903343.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221102235927649.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106144637446.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106145146325.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106152858574.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106161029913.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106161047751.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106161128440.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106161203847.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106153857254.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106154634364.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106163617325.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106164813602.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106165321234.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106165421377.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106165758655.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106170043153.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106170441881.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106170806148.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106170819822.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106181317274.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106181345055.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106135137700.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106141138070.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106183913407.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106215038425.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106215114407.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106220927765.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106221148762.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106222851452.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106223122363.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106223317457.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106223829499.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221107165345163.png">
<meta property="og:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221107165529903.png">
<meta property="article:published_time" content="2023-01-26T04:44:06.000Z">
<meta property="article:modified_time" content="2023-01-28T12:37:36.696Z">
<meta property="article:author" content="懒懒当大厨">
<meta property="article:tag" content="ICT 数通">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221029151115327.png">
  
    <link rel="alternate" href="/atom.xml" title="波波，早点走出来" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">波波，早点走出来</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://lanyangyangy.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-ICT第四次笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2023-01-26T04:44:06.000Z" itemprop="datePublished">2023-01-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      ICT第四次笔记
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="第四次笔记"><a href="#第四次笔记" class="headerlink" title="第四次笔记"></a>第四次笔记</h1><p>交换机PC连接   *down 管理员将端口shutdown</p>
<p>dis current-configuration 显示当前配置</p>
<p>display mac-address |include xxxx     只显示与xxxx有关的内容</p>
<p>排错思路：哪个设备  什么技术 什么原因</p>
<p><strong>路由器转发原理：路由器基于路由表进行数据包转发</strong></p>
<p>路由转发要从一端到另一端的路由器的路由表中都有目的网段。</p>
<p>例：</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221029151115327.png" class="" title="image-20221029151115327">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">R1</span><br><span class="line">dhcp enable</span><br><span class="line"></span><br><span class="line">interface GigabitEthernet0/0/0</span><br><span class="line"> ip address 192.168.1.1 255.255.255.0 </span><br><span class="line"> dhcp select interface</span><br><span class="line"></span><br><span class="line">interface GigabitEthernet0/0/1</span><br><span class="line"> ip address 12.1.1.1 255.255.255.0 </span><br><span class="line"> </span><br><span class="line">ip route-static 192.168.2.0 255.255.255.0 12.1.1.2//配置PC1去PC2的静态路由</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">R2</span><br><span class="line">interface GigabitEthernet0/0/0</span><br><span class="line"> ip address 12.1.1.2 255.255.255.0 </span><br><span class="line">#</span><br><span class="line">interface GigabitEthernet0/0/1</span><br><span class="line"> ip address 23.1.1.2 255.255.255.0 </span><br><span class="line"> </span><br><span class="line">ip route-static 192.168.2.0 255.255.255.0 23.1.1.3 //配置PC1去PC2的静态路由</span><br><span class="line">ip route-static 192.168.1.0 255.255.255.0 12.1.1.1 //配置PC2回PC1的静态路由</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">R3</span><br><span class="line">dhcp enable</span><br><span class="line">interface GigabitEthernet0/0/0</span><br><span class="line"> ip address 23.1.1.3 255.255.255.0 </span><br><span class="line"></span><br><span class="line">interface GigabitEthernet0/0/1</span><br><span class="line"> ip address 192.168.2.1 255.255.255.0 </span><br><span class="line"> dhcp select interface </span><br><span class="line"> </span><br><span class="line"> ip route-static 192.168.1.0 255.255.255.0 23.1.1.2//配置PC2回PC1的静态路由</span><br></pre></td></tr></table></figure>

<p>这里只配置了PC1与PC2进行ping，但PC1不能ping通R3，需要再配置静态路由。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">R1</span><br><span class="line">ip route-static 23.1.1.0 255.255.255.0 12.1.1.2</span><br></pre></td></tr></table></figure>



<p>静态路由：</p>
<ul>
<li>由网络管理员手工指定的路由</li>
<li>当网络拓扑发生变化时，<strong>管理员需要手工更新静态路由</strong>。</li>
</ul>
<p>动态路由：</p>
<ul>
<li><p>路由器使用路由协议从<strong>其他路由器</strong>那里获悉的路由</p>
</li>
<li><p>当网络拓扑发生变化时，<strong>路由器会自动更新</strong>路由信息。</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221031212827831.png" class="" title="image-20221031212827831"></li>
</ul>
<p>Destination&#x2F;Mask           proto（协议）                    pref  （优先级）        cost（同一路由协议获取到的路径比较）            Nexthop                    Interface    </p>
<p><strong><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221031214421810.png" class="" title="image-20221031214421810"></strong> </p>
<p>路由的度量在同一路由协议下才能进行比较。</p>
<p>等价路由(ECMP)      ：同一路由协议，到同一个目的地有几条相同度量值的路由时，这些路由都会被加入到路由表中，IP包会在这几个链路上负载分担。</p>
<h5 id="最长匹配原则"><a href="#最长匹配原则" class="headerlink" title="最长匹配原则"></a>最长匹配原则</h5><ol>
<li>查找路由表</li>
<li>目的地址与掩码分别做“与”操作</li>
<li>与路由表中的目的地址作比较</li>
<li>挑选出最长匹配项</li>
</ol>
<h2 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h2><p>OSPF协议基于链路状态算法，直接运行于IP协议上，IP协议号89.</p>
<h5 id="OSPF基本特点"><a href="#OSPF基本特点" class="headerlink" title="OSPF基本特点"></a>OSPF基本特点</h5><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221031223237665.png" class="" title="image-20221031223237665">

<p>OSPF协议基于链路状态算法，直接运行于IP协议上，IP协议号89</p>
<p>邻居表  full 才可以交换路由协议</p>
<p> RIP协议不带掩码		</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221031224334178.png" class="" title="image-20221031224334178">

<p>hello报文  建立和维护邻居关系</p>
<p>DD报文	隐式确认</p>
<p>LSU报文 更新报文</p>
<p>LACK   	确认报文</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display ospf interface g0/0/0   </span><br></pre></td></tr></table></figure>

<p>route-id ：</p>
<p>1.管理员手动配置</p>
<p>2.环回口最大IP作为route-id</p>
<p>3.物理接口最大IP作为route-id</p>
<p>route-id建立后无法修改，除非进程重启</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ospf 1</span><br><span class="line">area-ping</span><br><span class="line">network 10.0.0.2 0.0.0.255</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">display ospf peer		//查看邻居路由条目</span><br><span class="line">TransNet	中间路由   			StubNet		末梢路由</span><br></pre></td></tr></table></figure>

<h4 id="区域"><a href="#区域" class="headerlink" title="区域"></a>区域</h4><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221102235903343.png" class="" title="image-20221102235903343">

<p>route ID不是IP地址，必须存在</p>
<p>区域是一组网段的集合</p>
<p>区域间（维护区域内LSDB)不会传递链路状态信息</p>
<img src="ICT第四次笔记/image-20221102235927649.png" alt="image-20221102235927649"  />

<p>非骨干区域必须与骨干区域相连；</p>
<p>非骨干之间不传递LSA</p>
<p>路由器分类：</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106144637446.png" class="" title="image-20221106144637446">



<h4 id="OSPF基本配置"><a href="#OSPF基本配置" class="headerlink" title="OSPF基本配置"></a>OSPF基本配置</h4><p><strong>环回接口习惯上被称为Loopback接口</strong>，是路由器上的一个逻辑、虚拟接口。 除非设备瘫痪，否则其状态一直是up。 因为环回接口的稳定性，我们常使用一个环回接口地址来作为Router-ID，使整个设备的标识稳定可靠。</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106145146325.png" class="" title="image-20221106145146325">



<p>RTA：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ospf</span><br><span class="line">ospf router id 1.1.1.1</span><br><span class="line"></span><br><span class="line">area 1</span><br><span class="line">network 1.1.1.1 0.0.0.0</span><br><span class="line">network 10.1.1.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<p>RTB:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ospf</span><br><span class="line">ospf router id 2.2.2.2 </span><br><span class="line">area 1</span><br><span class="line">network 2.2.2.2 0.0.0.0</span><br><span class="line">network 10.1.1.0 0.0.0.255</span><br><span class="line"></span><br><span class="line">area 0</span><br><span class="line">network 10.1.2.0 0.0.0.255</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>RTC:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ospf</span><br><span class="line">ospf router id 3.3.3.3</span><br><span class="line"></span><br><span class="line">area 2</span><br><span class="line">network 3.3.3.3 0.0.0.0</span><br><span class="line">network 10.1.3.0 0.0.0.255</span><br><span class="line"></span><br><span class="line">area 0</span><br><span class="line">network 10.1.2.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<p>RTD:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ospf</span><br><span class="line">ospf router id 4.4.4.4</span><br><span class="line"></span><br><span class="line">area 2</span><br><span class="line">network 4.4.4.4 0.0.0.0</span><br><span class="line">network 10.1.3.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dis ospf peer brief //查看邻居</span><br></pre></td></tr></table></figure>



<h4 id="邻居与邻接关系"><a href="#邻居与邻接关系" class="headerlink" title="邻居与邻接关系"></a>邻居与邻接关系</h4><p>点到点，点到播不选举DR BDR</p>
<p>邻居：2-way（只是知道对方存在）		邻接：full（相互交互LSA）</p>
<p>掩码不一致时，邻居关系建立不起来</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106152858574.png" class="" title="image-20221106152858574">

<h5 id="虚连接："><a href="#虚连接：" class="headerlink" title="虚连接："></a><strong>虚连接</strong>：</h5><p>让非主干区域连接到主干区域</p>
<p>使用情况：</p>
<p>​			（1）没有直接与主干区域连接</p>
<p>​               (2)   分割主干区域</p>
<p>​				(3）没有主干区域</p>
<p>​			   (4)区域备份</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106161029913.png" class="" title="image-20221106161029913">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106161047751.png" class="" title="image-20221106161047751">



<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106161128440.png" class="" title="image-20221106161128440">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106161203847.png" class="" title="image-20221106161203847">



<p>配置：哪个区域	哪个位置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dis ospf interface G0/0/0 </span><br></pre></td></tr></table></figure>

<h5 id="DR-BDR"><a href="#DR-BDR" class="headerlink" title="DR   BDR"></a>DR   BDR</h5><img src="ICT第四次笔记/image-20221106153857254.png" alt="image-20221106153857254"  />



<h6 id="选举DR-BDR"><a href="#选举DR-BDR" class="headerlink" title="选举DR BDR"></a>选举DR BDR</h6><p>DR（选完即止，不会进行多次选举）:</p>
<ol>
<li><p>比较优先级  大优先          (缺省100)       优先级为零时不参与选举</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ospf dr-priority xxx 修改端口的route优先级 </span><br></pre></td></tr></table></figure>


</li>
<li><p>比较router id     大优先     从左到右一位一位进行比较</p>
</li>
</ol>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106154634364.png" class="" title="image-20221106154634364">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.指定邻居关系</span><br><span class="line">ospf</span><br><span class="line">peer x.x.x.x  手动建立邻接状态</span><br><span class="line"></span><br><span class="line">2.改变网络连接方式</span><br><span class="line">int g0/0/0</span><br><span class="line">ospf network-type ?</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="OSPF报文"><a href="#OSPF报文" class="headerlink" title="OSPF报文"></a>OSPF报文</h4><p>使用IP承接OSPF报文  IP协议号为89</p>
<h5 id="OSPF报文头部"><a href="#OSPF报文头部" class="headerlink" title="OSPF报文头部"></a>OSPF报文头部</h5><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106163617325.png" class="" title="image-20221106163617325">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">端口认证</span><br><span class="line">int g0/0/0</span><br><span class="line">ospf authentication-mode simple plain huawei  //配置认证 </span><br><span class="line"></span><br><span class="line">区域认证</span><br><span class="line">ospf</span><br><span class="line">area 0</span><br><span class="line">authentication-mode ?</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106164813602.png" class="" title="image-20221106164813602">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106165321234.png" class="" title="image-20221106165321234">

<p><strong>除Hello都有LSA</strong></p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106165421377.png" class="" title="image-20221106165421377">

<p>一二类LSA作用：计算区域路由</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106165758655.png" class="" title="image-20221106165758655">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106170043153.png" class="" title="image-20221106170043153">

<p>第五类LSA在传播过程中不会发生改变</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106170441881.png" class="" title="image-20221106170441881">





<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dis ospf lsdb router self-orig   //查看 LSA</span><br></pre></td></tr></table></figure>

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106170806148.png" class="" title="image-20221106170806148">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106170819822.png" class="" title="image-20221106170819822">

<h4 id="建立OSPF邻居与邻接关系"><a href="#建立OSPF邻居与邻接关系" class="headerlink" title="建立OSPF邻居与邻接关系"></a>建立OSPF邻居与邻接关系</h4><h5 id="HELLO包"><a href="#HELLO包" class="headerlink" title="HELLO包"></a>HELLO包</h5><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106181317274.png" class="" title="image-20221106181317274">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106181345055.png" class="" title="image-20221106181345055">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display ospf peer //查看邻居状态 </span><br></pre></td></tr></table></figure>

<h5 id="邻居状态变换（邻接关系）"><a href="#邻居状态变换（邻接关系）" class="headerlink" title="邻居状态变换（邻接关系）"></a>邻居状态变换（邻接关系）</h5><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106135137700.png" class="" title="image-20221106135137700">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106141138070.png" class="" title="image-20221106141138070"> 

<p>Down  	发送Hello包来进入Init状态</p>
<p>Attempt 	暂存状态，在收到包后进入Init状态</p>
<p>init		初始化状态	收到HELLO包回复后进入2-way</p>
<p>2-way	选举DR,BDR		一直选不出来可能是优先级都为0</p>
<p>2-way 	进入ExStart状态条件   （1）40s	（2）选出DR	BDR</p>
<p>ExStart	选择Master		隐式确认	从一直重复主发送的信息 </p>
<p>Exchange	交互列表信息，查看需要的信息 </p>
<p>Loading  	交互完整信息（LSA)</p>
<p>Full 			配置完成，信息交换完毕</p>
<p>​					在Full后，只需要Update完成更新。</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106183913407.png" class="" title="image-20221106183913407">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106215038425.png" class="" title="image-20221106215038425">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106215114407.png" class="" title="image-20221106215114407">

<h4 id="计算OSPF区域内路由"><a href="#计算OSPF区域内路由" class="headerlink" title="计算OSPF区域内路由"></a>计算OSPF区域内路由</h4><h5 id="LSDB"><a href="#LSDB" class="headerlink" title="LSDB"></a>LSDB</h5><h6 id="Stub网段（一般是环回口）"><a href="#Stub网段（一般是环回口）" class="headerlink" title="Stub网段（一般是环回口）"></a>Stub网段（一般是环回口）</h6><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106220927765.png" class="" title="image-20221106220927765">

<h6 id="Transit网段"><a href="#Transit网段" class="headerlink" title="Transit网段"></a>Transit网段</h6><p>有至少两台路由器的广播型网段或NBMA网段就是一种Transit网段</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106221148762.png" class="" title="image-20221106221148762">

<h6 id="点到点网段（point-to-point"><a href="#点到点网段（point-to-point" class="headerlink" title="点到点网段（point to point)"></a>点到点网段（point to point)</h6><h5 id="配置接口开销"><a href="#配置接口开销" class="headerlink" title="配置接口开销"></a>配置接口开销</h5><p>OSPF接口cost计算规则是：在接口下配置的cost值优先；如果没有在接口下配置cost，则cost&#x3D;参考带宽&#x2F;接口带宽。OSPF默认参考带宽为100M。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.接口下配置cost</span><br><span class="line">int g0/0/0 </span><br><span class="line">ospf cost x</span><br><span class="line"></span><br><span class="line">2.修改参考带宽</span><br><span class="line">ospf</span><br><span class="line">bandwidth-reference x   //bandwidth-reference默认为100M </span><br></pre></td></tr></table></figure>



<h4 id="一类LSA"><a href="#一类LSA" class="headerlink" title="一类LSA"></a>一类LSA</h4><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106222851452.png" class="" title="image-20221106222851452">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dis ospf lsdb router self-originate    //查看1类LSA</span><br></pre></td></tr></table></figure>

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106223122363.png" class="" title="image-20221106223122363">

<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106223317457.png" class="" title="image-20221106223317457">

<h6 id="使用Router-LSA描述点到点接口"><a href="#使用Router-LSA描述点到点接口" class="headerlink" title="使用Router-LSA描述点到点接口"></a>使用Router-LSA描述点到点接口</h6><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221106223829499.png" class="" title="image-20221106223829499">

<p>stubnet</p>
<h6 id="使用Router-LSA描述广播型接口或NBMA接口"><a href="#使用Router-LSA描述广播型接口或NBMA接口" class="headerlink" title="使用Router-LSA描述广播型接口或NBMA接口"></a>使用Router-LSA描述广播型接口或NBMA接口</h6><p>TransNet</p>
<img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221107165345163.png" class="" title="image-20221107165345163">

<h5 id="二类LSA（Network"><a href="#二类LSA（Network" class="headerlink" title="二类LSA（Network)"></a>二类LSA（Network)</h5><h6 id="使用Router-LSA描述广播型接口或NBMA接口-1"><a href="#使用Router-LSA描述广播型接口或NBMA接口-1" class="headerlink" title="使用Router-LSA描述广播型接口或NBMA接口"></a>使用Router-LSA描述广播型接口或NBMA接口</h6><img src="/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/image-20221107165529903.png" class="" title="image-20221107165529903">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dis ospf lsdb router network   //查看1类LSA</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://lanyangyangy.github.io/2023/01/26/ICT%E7%AC%AC%E5%9B%9B%E6%AC%A1%E7%AC%94%E8%AE%B0/" data-id="cldfxvtaj000jvg9uc8282i2n" data-title="ICT第四次笔记" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ICT-%E6%95%B0%E9%80%9A/" rel="tag">ICT 数通</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/01/26/ICT%E7%AC%AC%E4%BA%94%E6%AC%A1%E7%AC%94%E8%AE%B0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ICT第五次笔记
        
      </div>
    </a>
  
  
    <a href="/2023/01/26/ICT%E7%AC%AC%E4%B8%89%E6%AC%A1%E7%AC%94%E8%AE%B0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ICT第三次笔记</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICT-%E6%95%B0%E9%80%9A/" rel="tag">ICT 数通</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/numpy/" rel="tag">numpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" rel="tag">python 面向对象</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ICT-%E6%95%B0%E9%80%9A/" style="font-size: 20px;">ICT 数通</a> <a href="/tags/numpy/" style="font-size: 10px;">numpy</a> <a href="/tags/python-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 10px;">python 面向对象</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/01/26/ICT%E7%AC%AC%E5%8D%81%E4%B8%80%E6%AC%A1%E7%AC%94%E8%AE%B0/">ICT第十一次笔记</a>
          </li>
        
          <li>
            <a href="/2023/01/26/ICT%E7%AC%AC%E5%8D%81%E6%AC%A1%E7%AC%94%E8%AE%B0/">ICT第十次笔记</a>
          </li>
        
          <li>
            <a href="/2023/01/26/ICT%E7%AC%AC%E4%B9%9D%E6%AC%A1%E7%AC%94%E8%AE%B0/">ICT第九次笔记</a>
          </li>
        
          <li>
            <a href="/2023/01/26/ICT%E7%AC%AC%E5%85%AB%E6%AC%A1%E7%AC%94%E8%AE%B0/">ICT第八次笔记</a>
          </li>
        
          <li>
            <a href="/2023/01/26/ICT%E7%AC%AC%E4%B8%83%E6%AC%A1%E7%AC%94%E8%AE%B0/">ICT第七次笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 懒懒当大厨<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>